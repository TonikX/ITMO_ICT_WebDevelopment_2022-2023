{"config":{"indexing":"full","lang":["en"],"min_search_length":3,"prebuild_index":false,"separator":"[\\s\\-]+"},"docs":[{"location":"","text":"Web-\u043f\u0440\u043e\u0433\u0440\u0430\u043c\u043c\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u0435 2022 \u041b\u0430\u0431\u043e\u0440\u0430\u0442\u043e\u0440\u043d\u044b\u0435 \u0440\u0430\u0431\u043e\u0442\u044b \u041a\u0441\u0435\u043d\u0438\u0438 \u0412\u0430\u0445\u0440\u0443\u0448\u0435\u0432\u043e\u0439 K33412","title":"Web-\u043f\u0440\u043e\u0433\u0440\u0430\u043c\u043c\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u0435 2022"},{"location":"#web-2022","text":"","title":"Web-\u043f\u0440\u043e\u0433\u0440\u0430\u043c\u043c\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u0435 2022"},{"location":"#k33412","text":"","title":"\u041b\u0430\u0431\u043e\u0440\u0430\u0442\u043e\u0440\u043d\u044b\u0435 \u0440\u0430\u0431\u043e\u0442\u044b \u041a\u0441\u0435\u043d\u0438\u0438 \u0412\u0430\u0445\u0440\u0443\u0448\u0435\u0432\u043e\u0439 K33412"},{"location":"lr2/","text":"\u041b\u0430\u0431\u043e\u0440\u0430\u0442\u043e\u0440\u043d\u0430\u044f \u0440\u0430\u0431\u043e\u0442\u0430 2 conferences\\admin.py from django.contrib import admin from .models import * @admin . register ( Conference , Author , Performance ) class Admin ( admin . ModelAdmin ): pass conferences\\apps.py from django.apps import AppConfig class ConferencesConfig ( AppConfig ): default_auto_field = 'django.db.models.BigAutoField' name = 'conferences' conferences\\forms.py from django import forms from .models import * class RegisterForm ( forms . ModelForm ): class Meta : model = Author help_texts = { 'username' : None , } fields = [ 'username' , 'last_name' , 'first_name' , 'password' , ] labels = { 'username' : '\u041b\u043e\u0433\u0438\u043d' , 'last_name' : '\u0424\u0430\u043c\u0438\u043b\u0438\u044f' , 'first_name' : '\u0418\u043c\u044f' , 'password' : '\u041f\u0430\u0440\u043e\u043b\u044c' } class ConferenceRegisterForm ( forms . ModelForm ): class Meta : model = Performance fields = [ 'title' , 'description' , ] labels = { 'title' : '\u0422\u0435\u043c\u0430' , 'description' : '\u041e\u043f\u0438\u0441\u0430\u043d\u0438\u0435' } class CommentForm ( forms . ModelForm ): class Meta : model = Comment fields = [ 'body' , 'rating' ] widgets = { 'body' : forms . Textarea ( attrs = { 'rows' : 3 , 'cols' : 40 }), } labels = { 'body' : '\u0422\u0435\u043a\u0441\u0442 \u043a\u043e\u043c\u043c\u0435\u043d\u0442\u0430\u0440\u0438\u044f' , 'rating' : '\u041e\u0446\u0435\u043d\u043a\u0430' } conferences\\models.py from django.conf import settings from django.contrib.auth.models import AbstractUser from django.core.validators import MaxValueValidator , MinValueValidator from django.db import models class Conference ( models . Model ): name = models . CharField ( max_length = 50 ) subject = models . CharField ( max_length = 30 ) location = models . CharField ( max_length = 30 ) terms_of_participation = models . CharField ( max_length = 50 ) authors = models . ManyToManyField ( 'Author' , through = 'Performance' ) date = models . DateTimeField ( auto_now_add = True , blank = True ) def __str__ ( self ) -> str : return self . name class Author ( AbstractUser ): last_name = models . CharField ( max_length = 30 ) first_name = models . CharField ( max_length = 30 ) def __str__ ( self ) -> str : return f \" { self . first_name } { self . last_name } ( { self . username } )\" class Performance ( models . Model ): title = models . CharField ( max_length = 50 ) description = models . TextField () is_recommended = models . BooleanField ( default = False ) author = models . ForeignKey ( settings . AUTH_USER_MODEL , on_delete = models . CASCADE ) conference = models . ForeignKey ( Conference , on_delete = models . CASCADE ) def __str__ ( self ) -> str : return f \" { self . title } by { self . author . first_name } { self . author . last_name } \" class Comment ( models . Model ): post = models . ForeignKey ( Conference , on_delete = models . CASCADE , related_name = 'comments' ) author = models . ForeignKey ( Author , on_delete = models . CASCADE ) rating = models . IntegerField ( default = 1 , validators = [ MaxValueValidator ( 10 ), MinValueValidator ( 1 ) ] ) body = models . TextField () created_on = models . DateTimeField ( auto_now_add = True ) class Meta : ordering = [ 'created_on' ] def __str__ ( self ): return 'Comment {} by {} ' . format ( self . body , self . name ) conferences\\urls.py from django.contrib.auth import views from django.urls import path from .views import * urlpatterns = [ path ( 'login/' , views . LoginView . as_view (), name = 'login' ), path ( 'logout/' , views . LogoutView . as_view (), name = 'logout' ), path ( 'register/' , register_view , name = 'register' ), path ( 'conferences/' , conferences_view , name = 'conferences' ), path ( 'conferences/<int:pk>' , conference_detail , name = 'conference_detail' ), path ( 'conferences/<int:pk>/register' , conference_register , name = 'conference_register' ), path ( 'performances/' , performance_view , name = 'performances' ), path ( 'performances/<int:pk>' , performance_edit , name = 'performance_edit' ), path ( 'performances/<int:pk>/delete' , performance_delete , name = 'performance_delete' ), path ( '' , index_view , name = 'index' ), ] conferences\\views.py from django.http import Http404 from django.shortcuts import render , redirect , get_object_or_404 from .forms import * from .models import * def index_view ( request ): conferences = Conference . objects . all () return render ( request , 'index.html' , { 'conferences' : conferences }) def register_view ( request ): context = {} form = RegisterForm ( request . POST or None ) if form . is_valid (): u = form . save ( commit = False ) u . set_password ( request . POST . dict ()[ 'password' ]) form . save () return redirect ( '/login/' ) context [ 'form' ] = form return render ( request , 'registration/register.html' , context ) def conferences_view ( request ): conferences = Conference . objects . all () return render ( request , 'conferences/list_view.html' , { 'conferences' : conferences }) def conference_detail ( request , pk ): try : conference = Conference . objects . get ( pk = pk ) performances = Performance . objects . filter ( conference = conference ) comments = Comment . objects . filter ( post = pk ) context = { 'conference' : conference , 'performances' : performances , 'comments' : comments } form = CommentForm ( request . POST or None ) context [ 'form' ] = form if form . is_valid (): comment = form . save ( commit = False ) comment . author = Author . objects . get ( pk = request . user . id ) comment . post = conference comment . save () except Conference . DoesNotExist : raise Http404 ( \"Conference does not exist\" ) return render ( request , 'conferences/detail.html' , context ) def conference_register ( request , pk ): context = {} if not request . user . is_authenticated : return redirect ( '/login/' ) form = ConferenceRegisterForm ( request . POST or None ) if form . is_valid (): performance = form . save ( commit = False ) performance . author = Author . objects . get ( pk = request . user . id ) performance . conference = Conference . objects . get ( pk = pk ) performance . save () return redirect ( f '/conferences/ { pk } ' ) context [ 'form' ] = form return render ( request , 'conferences/register_performance.html' , context ) def performance_view ( request ): if not request . user . is_authenticated : return redirect ( '/login/' ) conference = request . GET . get ( 'conference' , None ) if conference : performances = Performance . objects . filter ( author = request . user . id , conference = conference ) else : performances = Performance . objects . filter ( author = request . user . id ) return render ( request , 'performances/list_view.html' , { 'performances' : performances }) def performance_edit ( request , pk ): context = {} if not request . user . is_authenticated : return redirect ( '/login/' ) instance = get_object_or_404 ( Performance , id = pk , author = request . user . id ) form = ConferenceRegisterForm ( request . POST or None , instance = instance ) if form . is_valid (): form . save () return redirect ( '/performances/' ) context [ 'form' ] = form context [ 'pk' ] = pk return render ( request , 'performances/edit_performance.html' , context ) def performance_delete ( request , pk ): if not request . user . is_authenticated : return redirect ( '/login/' ) instance = get_object_or_404 ( Performance , id = pk , author = request . user . id ) print ( instance ) instance . delete () return redirect ( '/performances/' ) conferences\\templates\\base.html <!doctype html> < html lang = \"en\" > < head > < link rel = \"stylesheet\" href = \"https://cdn.jsdelivr.net/npm/bootstrap@5.2.2/dist/css/bootstrap.min.css\" crossorigin = \"anonymous\" > < title > \u0421\u043f\u0438\u0441\u043e\u043a \u043a\u043e\u043d\u0444\u0435\u0440\u0435\u043d\u0446\u0438\u0439 </ title > </ head > < body > < nav class = \"navbar navbar-expand-lg navbar-light bg-light mx-3\" > < a class = \"navbar-brand\" href = \"https://youtu.be/LqiHmZhO2to\" > Conferences site </ a > < div class = \"collapse navbar-collapse justify-content-between \" id = \"navbarNav\" > < ul class = \"navbar-nav mr-auto\" > < li class = \"nav-item active\" > < a class = \"nav-link\" href = \"/\" > \u0413\u043b\u0430\u0432\u043d\u0430\u044f </ a > </ li > < li class = \"nav-item\" > < a class = \"nav-link\" href = \"/conferences/\" > \u041a\u043e\u043d\u0444\u0435\u0440\u0435\u043d\u0446\u0438\u0438 </ a > </ li > < li class = \"nav-item\" > < a class = \"nav-link\" href = \"/performances/\" > \u041c\u043e\u0438 \u0432\u044b\u0441\u0442\u0443\u043f\u043b\u0435\u043d\u0438\u044f </ a > </ li > </ ul > < span class = \"navbar-text\" > {% if user.is_authenticated %} \u041f\u0440\u0438\u0432\u0435\u0442, {{ user.username }} < a class = \"nav-link d-inline-flex ms-2\" href = \"/logout/\" > \u0412\u044b\u0439\u0442\u0438 </ a > {% else %} < a class = \"nav-link\" href = \"/login/\" > Login </ a > {% endif %} </ span > </ div > </ nav > < div class = \"container\" > < div class = \"row justify-content-center\" > < div class = \"text-center m-3\" > {% block main %} {% endblock %} </ div > </ div > </ div > </ body > </ html > conferences\\templates\\index.html {% extends 'base.html' %} {% block main %} < h1 > \u041a\u043e\u043d\u0444\u0435\u0440\u0435\u043d\u0446\u0438\u0438 </ h1 > {% if conferences %} {% for conference in conferences %} < div class = \"card mb-3\" > < div class = \"card-body\" > < h4 class = \"card-title\" > {{ conference.name }} </ h4 > < h6 class = \"card-subtitle mb-2\" > {{ conference.subject }} </ h6 > < h6 class = \"card-subtitle mb-2 text-muted\" > {{ conference.location }} ({{ conference.date }}) </ h6 > < p class = \"card-text\" > \u0421\u043f\u0438\u0441\u043e\u043a \u0443\u0447\u0430\u0441\u0442\u043d\u0438\u043a\u043e\u0432 </ p > < table class = \"table\" > < tbody > {% for participant in conference.authors.all %} < tr > < td > {{ participant.first_name }} {{ participant.last_name }} </ td > </ tr > {% endfor %} </ tbody > </ table > < a href = \"{% url 'conference_detail' conference.id %}\" class = \"card-link\" > \u041f\u043e\u0434\u0440\u043e\u0431\u043d\u0435\u0435 </ a > </ div > </ div > {% endfor %} {% else %} < div > \u041d\u0435\u0442 \u043d\u0438 \u043e\u0434\u043d\u043e\u0439 \u043a\u043e\u043d\u0444\u0435\u0440\u0435\u043d\u0446\u0438\u0438 </ div > {% endif %} {% endblock %} conferences\\templates\\conferences\\detail.html {% extends 'base.html' %} {% block main %} < h1 > {{ conference.name }} </ h1 > < h3 class = \"text-muted\" > {{ conference.subject }} </ h3 > < h5 > \u041c\u0435\u0441\u0442\u043e \u043f\u0440\u043e\u0432\u0435\u0434\u0435\u043d\u0438\u044f: {{ conference.location }} ({{ conference.date|date:'d/m/Y H:i' }}) </ h3 > < h5 > \u0423\u0441\u043b\u043e\u0432\u0438\u044f \u0443\u0447\u0430\u0441\u0442\u0438\u044f: {{ conference.terms_of_participation }} </ h5 > < table class = \"table my-5\" > < thead > < tr > < th scope = \"col\" > \u0414\u043e\u043a\u043b\u0430\u0434\u0447\u0438\u043a </ th > < th scope = \"col\" > \u0422\u0435\u043c\u0430 \u0432\u044b\u0441\u0442\u0443\u043f\u043b\u0435\u043d\u0438\u044f </ th > < th scope = \"col\" > \u041e\u043f\u0438\u0441\u0430\u043d\u0438\u0435 </ th > < th scope = \"col\" > \u0420\u0435\u043a\u043e\u043c\u0435\u043d\u0434\u043e\u0432\u0430\u043d \u043a \u043f\u0443\u0431\u043b\u0438\u043a\u0430\u0446\u0438\u0438 </ th > </ tr > </ thead > < tbody > {% for performance in performances %} < tr > < td > {{ performance.author.first_name }} {{ performance.author.last_name }} </ td > < td > {{ performance.title }} </ td > < td > {{ performance.description }} </ td > < td > {% if performance.is_recommended %} \u0414\u0430 {% else %} \u041d\u0435\u0442 {% endif %} </ td > </ tr > {% endfor %} </ tbody > </ table > < h3 class = \"my-5\" > \u041a\u043e\u043c\u043c\u0435\u043d\u0442\u0430\u0440\u0438\u0438 </ h3 > {% for comment in comments %} < div class = \"card mb-3\" > < div class = \"card-body\" > < h4 class = \"card-title\" > {{ comment.author.first_name }} {{ comment.author.last_name }} </ h4 > < h6 class = \"card-subtitle mb-2 text-muted\" > {{ comment.created_on|date:'d/m/Y H:i' }} </ h6 > < p class = \"card-text\" > {{ comment.body }} </ p > < h6 class = \"card-subtitle mb-2 text-muted\" > \u041e\u0446\u0435\u043d\u043a\u0430 {{ comment.rating }}/10 </ h6 > </ div > </ div > {% endfor %} {% if user.is_authenticated %} < h3 class = \"my-3\" > \u041e\u0441\u0442\u0430\u0432\u044c\u0442\u0435 \u043a\u043e\u043c\u043c\u0435\u043d\u0442\u0430\u0440\u0438\u0439 </ h3 > < form method = \"post\" class = \"my-3\" > {% csrf_token %} < input type = \"hidden\" name = \"next\" value = \"{{ next }}\" > {{ form.as_p }} < button type = \"submit\" class = \"btn btn-primary btn-block\" > \u041e\u0441\u0442\u0430\u0432\u0438\u0442\u044c \u043a\u043e\u043c\u043c\u0435\u043d\u0442\u0430\u0440\u0438\u0439 </ button > </ form > < a href = \"{% url 'conference_register' conference.id %}\" > \u041f\u043e\u0434\u0430\u0442\u044c \u0437\u0430\u044f\u0432\u043a\u0443 </ a >< br > < a href = \"{% url 'performances' %}?conference={{ conference.id }}\" > \u041c\u043e\u0438 \u0437\u0430\u044f\u0432\u043a\u0438 \u043d\u0430 \u044d\u0442\u0443 \u043a\u043e\u043d\u0444\u0435\u0440\u0435\u043d\u0446\u0438\u044e </ a > {% endif %} < br > < a href = \"{% url 'conferences' %}\" > \u041a \u0441\u043f\u0438\u0441\u043a\u0443 \u043a\u043e\u043d\u0444\u0435\u0440\u0435\u043d\u0446\u0438\u0439 </ a > {% endblock %} conferences\\templates\\conferences\\list_view.html {% extends 'base.html' %} {% block main %} < h1 > \u041a\u043e\u043d\u0444\u0435\u0440\u0435\u043d\u0446\u0438\u0438 </ h1 > {% if conferences %} < div class = \"list-group\" > {% for conference in conferences %} < a href = \"{% url 'conference_detail' conference.id %}\" class = \"list-group-item list-group-item-action\" > {{ conference.name }} </ a > {% endfor %} </ div > {% else %} < div > \u041d\u0435\u0442 \u043d\u0438 \u043e\u0434\u043d\u043e\u0439 \u043a\u043e\u043d\u0444\u0435\u0440\u0435\u043d\u0446\u0438\u0438 </ div > {% endif %} {% endblock %} conferences\\templates\\conferences\\register_performance.html {% extends 'base.html' %} {% block main %} < div class = \"card\" > < div class = \"card-body\" > < h4 class = \"card-title\" > \u041f\u043e\u0434\u0430\u0442\u044c \u0437\u0430\u044f\u0432\u043a\u0443 </ h4 > < form method = \"post\" > {% csrf_token %} < input type = \"hidden\" name = \"next\" value = \"{{ next }}\" > {{ form.as_p }} < button type = \"submit\" class = \"btn btn-primary btn-block\" > \u041f\u043e\u0434\u0442\u0432\u0435\u0440\u0434\u0438\u0442\u044c </ button > </ form > </ div > </ div > {% endblock %} conferences\\templates\\performances\\edit_performance.html {% extends 'base.html' %} {% block main %} < div class = \"card\" > < div class = \"card-body\" > < h4 class = \"card-title\" > \u041e\u0442\u0440\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c \u0437\u0430\u044f\u0432\u043a\u0443 </ h4 > < form method = \"post\" > {% csrf_token %} < input type = \"hidden\" name = \"next\" value = \"{{ next }}\" > {{ form.as_p }} < button type = \"submit\" class = \"btn btn-primary btn-block\" > \u041f\u043e\u0434\u0442\u0432\u0435\u0440\u0434\u0438\u0442\u044c </ button > < a href = \"{% url 'performance_delete' pk %}\" class = \"btn btn-danger btn-block\" > \u0423\u0434\u0430\u043b\u0438\u0442\u044c </ a > </ form > </ div > </ div > {% endblock %} conferences\\templates\\performances\\list_view.html {% extends 'base.html' %} {% block main %} < div class = \"list-group\" > {% if performances %} {% for performance in performances %} < a href = \"{% url 'performance_edit' performance.id %}\" class = \"list-group-item list-group-item-action\" > {{ performance.title }} ({{ performance.conference.name }}) </ a > {% endfor %} {% else %} < div > \u0412\u044b \u043d\u0435 \u0441\u043e\u0437\u0434\u0430\u043b\u0438 \u043d\u0438 \u043e\u0434\u043d\u043e\u0433\u043e \u0432\u044b\u0441\u0442\u0443\u043f\u043b\u0435\u043d\u0438\u044f </ div > {% endif %} </ div > {% endblock %} conferences\\templates\\registration\\logged_out.html {% extends 'base.html' %} {% block main %} < p > \u0412\u044b \u0432\u044b\u0448\u043b\u0438! </ p > < a href = \"{% url 'login' %}\" > \u0412\u043e\u0439\u0442\u0438 </ a > {% endblock %} conferences\\templates\\registration\\login.html {% extends 'base.html' %} {% block main %} < div class = \"card\" > < div class = \"card-body\" > < h4 class = \"card-title\" > \u0412\u043e\u0439\u0434\u0438\u0442\u0435 \u0432 \u0441\u0432\u043e\u0439 \u0430\u043a\u043a\u0430\u0443\u043d\u0442 </ h4 > < form method = \"post\" > {% csrf_token %} < input type = \"hidden\" name = \"next\" value = \"{{ next }}\" > {{ form.as_p }} < button type = \"submit\" class = \"btn btn-primary btn-block\" > \u0412\u043e\u0439\u0442\u0438 </ button > </ form > < a href = \"{% url 'register' %}\" class = \"card-link\" > \u041d\u0435\u0442 \u0443\u0447\u0435\u0442\u043d\u043e\u0439 \u0437\u0430\u043f\u0438\u0441\u0438? </ a > </ div > </ div > {% endblock %} conferences\\templates\\registration\\register.html {% extends 'base.html' %} {% block main %} < div class = \"card\" > < div class = \"card-body\" > < h4 class = \"card-title\" > \u0420\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u044f </ h4 > < form method = \"post\" > {% csrf_token %} < input type = \"hidden\" name = \"next\" value = \"{{ next }}\" > {{ form.as_p }} < button type = \"submit\" class = \"btn btn-primary btn-block\" > \u041f\u043e\u0434\u0442\u0432\u0435\u0440\u0434\u0438\u0442\u044c </ button > </ form > < a href = \"{% url 'login' %}\" class = \"card-link\" > \u0423\u0436\u0435 \u0435\u0441\u0442\u044c \u0443\u0447\u0435\u0442\u043d\u0430\u044f \u0437\u0430\u043f\u0438\u0441\u044c? </ a > </ div > </ div > {% endblock %}","title":"\u041b\u0430\u0431\u043e\u0440\u0430\u0442\u043e\u0440\u043d\u0430\u044f \u0440\u0430\u0431\u043e\u0442\u0430 \u21162"},{"location":"lr2/#2","text":"conferences\\admin.py from django.contrib import admin from .models import * @admin . register ( Conference , Author , Performance ) class Admin ( admin . ModelAdmin ): pass conferences\\apps.py from django.apps import AppConfig class ConferencesConfig ( AppConfig ): default_auto_field = 'django.db.models.BigAutoField' name = 'conferences' conferences\\forms.py from django import forms from .models import * class RegisterForm ( forms . ModelForm ): class Meta : model = Author help_texts = { 'username' : None , } fields = [ 'username' , 'last_name' , 'first_name' , 'password' , ] labels = { 'username' : '\u041b\u043e\u0433\u0438\u043d' , 'last_name' : '\u0424\u0430\u043c\u0438\u043b\u0438\u044f' , 'first_name' : '\u0418\u043c\u044f' , 'password' : '\u041f\u0430\u0440\u043e\u043b\u044c' } class ConferenceRegisterForm ( forms . ModelForm ): class Meta : model = Performance fields = [ 'title' , 'description' , ] labels = { 'title' : '\u0422\u0435\u043c\u0430' , 'description' : '\u041e\u043f\u0438\u0441\u0430\u043d\u0438\u0435' } class CommentForm ( forms . ModelForm ): class Meta : model = Comment fields = [ 'body' , 'rating' ] widgets = { 'body' : forms . Textarea ( attrs = { 'rows' : 3 , 'cols' : 40 }), } labels = { 'body' : '\u0422\u0435\u043a\u0441\u0442 \u043a\u043e\u043c\u043c\u0435\u043d\u0442\u0430\u0440\u0438\u044f' , 'rating' : '\u041e\u0446\u0435\u043d\u043a\u0430' } conferences\\models.py from django.conf import settings from django.contrib.auth.models import AbstractUser from django.core.validators import MaxValueValidator , MinValueValidator from django.db import models class Conference ( models . Model ): name = models . CharField ( max_length = 50 ) subject = models . CharField ( max_length = 30 ) location = models . CharField ( max_length = 30 ) terms_of_participation = models . CharField ( max_length = 50 ) authors = models . ManyToManyField ( 'Author' , through = 'Performance' ) date = models . DateTimeField ( auto_now_add = True , blank = True ) def __str__ ( self ) -> str : return self . name class Author ( AbstractUser ): last_name = models . CharField ( max_length = 30 ) first_name = models . CharField ( max_length = 30 ) def __str__ ( self ) -> str : return f \" { self . first_name } { self . last_name } ( { self . username } )\" class Performance ( models . Model ): title = models . CharField ( max_length = 50 ) description = models . TextField () is_recommended = models . BooleanField ( default = False ) author = models . ForeignKey ( settings . AUTH_USER_MODEL , on_delete = models . CASCADE ) conference = models . ForeignKey ( Conference , on_delete = models . CASCADE ) def __str__ ( self ) -> str : return f \" { self . title } by { self . author . first_name } { self . author . last_name } \" class Comment ( models . Model ): post = models . ForeignKey ( Conference , on_delete = models . CASCADE , related_name = 'comments' ) author = models . ForeignKey ( Author , on_delete = models . CASCADE ) rating = models . IntegerField ( default = 1 , validators = [ MaxValueValidator ( 10 ), MinValueValidator ( 1 ) ] ) body = models . TextField () created_on = models . DateTimeField ( auto_now_add = True ) class Meta : ordering = [ 'created_on' ] def __str__ ( self ): return 'Comment {} by {} ' . format ( self . body , self . name ) conferences\\urls.py from django.contrib.auth import views from django.urls import path from .views import * urlpatterns = [ path ( 'login/' , views . LoginView . as_view (), name = 'login' ), path ( 'logout/' , views . LogoutView . as_view (), name = 'logout' ), path ( 'register/' , register_view , name = 'register' ), path ( 'conferences/' , conferences_view , name = 'conferences' ), path ( 'conferences/<int:pk>' , conference_detail , name = 'conference_detail' ), path ( 'conferences/<int:pk>/register' , conference_register , name = 'conference_register' ), path ( 'performances/' , performance_view , name = 'performances' ), path ( 'performances/<int:pk>' , performance_edit , name = 'performance_edit' ), path ( 'performances/<int:pk>/delete' , performance_delete , name = 'performance_delete' ), path ( '' , index_view , name = 'index' ), ] conferences\\views.py from django.http import Http404 from django.shortcuts import render , redirect , get_object_or_404 from .forms import * from .models import * def index_view ( request ): conferences = Conference . objects . all () return render ( request , 'index.html' , { 'conferences' : conferences }) def register_view ( request ): context = {} form = RegisterForm ( request . POST or None ) if form . is_valid (): u = form . save ( commit = False ) u . set_password ( request . POST . dict ()[ 'password' ]) form . save () return redirect ( '/login/' ) context [ 'form' ] = form return render ( request , 'registration/register.html' , context ) def conferences_view ( request ): conferences = Conference . objects . all () return render ( request , 'conferences/list_view.html' , { 'conferences' : conferences }) def conference_detail ( request , pk ): try : conference = Conference . objects . get ( pk = pk ) performances = Performance . objects . filter ( conference = conference ) comments = Comment . objects . filter ( post = pk ) context = { 'conference' : conference , 'performances' : performances , 'comments' : comments } form = CommentForm ( request . POST or None ) context [ 'form' ] = form if form . is_valid (): comment = form . save ( commit = False ) comment . author = Author . objects . get ( pk = request . user . id ) comment . post = conference comment . save () except Conference . DoesNotExist : raise Http404 ( \"Conference does not exist\" ) return render ( request , 'conferences/detail.html' , context ) def conference_register ( request , pk ): context = {} if not request . user . is_authenticated : return redirect ( '/login/' ) form = ConferenceRegisterForm ( request . POST or None ) if form . is_valid (): performance = form . save ( commit = False ) performance . author = Author . objects . get ( pk = request . user . id ) performance . conference = Conference . objects . get ( pk = pk ) performance . save () return redirect ( f '/conferences/ { pk } ' ) context [ 'form' ] = form return render ( request , 'conferences/register_performance.html' , context ) def performance_view ( request ): if not request . user . is_authenticated : return redirect ( '/login/' ) conference = request . GET . get ( 'conference' , None ) if conference : performances = Performance . objects . filter ( author = request . user . id , conference = conference ) else : performances = Performance . objects . filter ( author = request . user . id ) return render ( request , 'performances/list_view.html' , { 'performances' : performances }) def performance_edit ( request , pk ): context = {} if not request . user . is_authenticated : return redirect ( '/login/' ) instance = get_object_or_404 ( Performance , id = pk , author = request . user . id ) form = ConferenceRegisterForm ( request . POST or None , instance = instance ) if form . is_valid (): form . save () return redirect ( '/performances/' ) context [ 'form' ] = form context [ 'pk' ] = pk return render ( request , 'performances/edit_performance.html' , context ) def performance_delete ( request , pk ): if not request . user . is_authenticated : return redirect ( '/login/' ) instance = get_object_or_404 ( Performance , id = pk , author = request . user . id ) print ( instance ) instance . delete () return redirect ( '/performances/' ) conferences\\templates\\base.html <!doctype html> < html lang = \"en\" > < head > < link rel = \"stylesheet\" href = \"https://cdn.jsdelivr.net/npm/bootstrap@5.2.2/dist/css/bootstrap.min.css\" crossorigin = \"anonymous\" > < title > \u0421\u043f\u0438\u0441\u043e\u043a \u043a\u043e\u043d\u0444\u0435\u0440\u0435\u043d\u0446\u0438\u0439 </ title > </ head > < body > < nav class = \"navbar navbar-expand-lg navbar-light bg-light mx-3\" > < a class = \"navbar-brand\" href = \"https://youtu.be/LqiHmZhO2to\" > Conferences site </ a > < div class = \"collapse navbar-collapse justify-content-between \" id = \"navbarNav\" > < ul class = \"navbar-nav mr-auto\" > < li class = \"nav-item active\" > < a class = \"nav-link\" href = \"/\" > \u0413\u043b\u0430\u0432\u043d\u0430\u044f </ a > </ li > < li class = \"nav-item\" > < a class = \"nav-link\" href = \"/conferences/\" > \u041a\u043e\u043d\u0444\u0435\u0440\u0435\u043d\u0446\u0438\u0438 </ a > </ li > < li class = \"nav-item\" > < a class = \"nav-link\" href = \"/performances/\" > \u041c\u043e\u0438 \u0432\u044b\u0441\u0442\u0443\u043f\u043b\u0435\u043d\u0438\u044f </ a > </ li > </ ul > < span class = \"navbar-text\" > {% if user.is_authenticated %} \u041f\u0440\u0438\u0432\u0435\u0442, {{ user.username }} < a class = \"nav-link d-inline-flex ms-2\" href = \"/logout/\" > \u0412\u044b\u0439\u0442\u0438 </ a > {% else %} < a class = \"nav-link\" href = \"/login/\" > Login </ a > {% endif %} </ span > </ div > </ nav > < div class = \"container\" > < div class = \"row justify-content-center\" > < div class = \"text-center m-3\" > {% block main %} {% endblock %} </ div > </ div > </ div > </ body > </ html > conferences\\templates\\index.html {% extends 'base.html' %} {% block main %} < h1 > \u041a\u043e\u043d\u0444\u0435\u0440\u0435\u043d\u0446\u0438\u0438 </ h1 > {% if conferences %} {% for conference in conferences %} < div class = \"card mb-3\" > < div class = \"card-body\" > < h4 class = \"card-title\" > {{ conference.name }} </ h4 > < h6 class = \"card-subtitle mb-2\" > {{ conference.subject }} </ h6 > < h6 class = \"card-subtitle mb-2 text-muted\" > {{ conference.location }} ({{ conference.date }}) </ h6 > < p class = \"card-text\" > \u0421\u043f\u0438\u0441\u043e\u043a \u0443\u0447\u0430\u0441\u0442\u043d\u0438\u043a\u043e\u0432 </ p > < table class = \"table\" > < tbody > {% for participant in conference.authors.all %} < tr > < td > {{ participant.first_name }} {{ participant.last_name }} </ td > </ tr > {% endfor %} </ tbody > </ table > < a href = \"{% url 'conference_detail' conference.id %}\" class = \"card-link\" > \u041f\u043e\u0434\u0440\u043e\u0431\u043d\u0435\u0435 </ a > </ div > </ div > {% endfor %} {% else %} < div > \u041d\u0435\u0442 \u043d\u0438 \u043e\u0434\u043d\u043e\u0439 \u043a\u043e\u043d\u0444\u0435\u0440\u0435\u043d\u0446\u0438\u0438 </ div > {% endif %} {% endblock %} conferences\\templates\\conferences\\detail.html {% extends 'base.html' %} {% block main %} < h1 > {{ conference.name }} </ h1 > < h3 class = \"text-muted\" > {{ conference.subject }} </ h3 > < h5 > \u041c\u0435\u0441\u0442\u043e \u043f\u0440\u043e\u0432\u0435\u0434\u0435\u043d\u0438\u044f: {{ conference.location }} ({{ conference.date|date:'d/m/Y H:i' }}) </ h3 > < h5 > \u0423\u0441\u043b\u043e\u0432\u0438\u044f \u0443\u0447\u0430\u0441\u0442\u0438\u044f: {{ conference.terms_of_participation }} </ h5 > < table class = \"table my-5\" > < thead > < tr > < th scope = \"col\" > \u0414\u043e\u043a\u043b\u0430\u0434\u0447\u0438\u043a </ th > < th scope = \"col\" > \u0422\u0435\u043c\u0430 \u0432\u044b\u0441\u0442\u0443\u043f\u043b\u0435\u043d\u0438\u044f </ th > < th scope = \"col\" > \u041e\u043f\u0438\u0441\u0430\u043d\u0438\u0435 </ th > < th scope = \"col\" > \u0420\u0435\u043a\u043e\u043c\u0435\u043d\u0434\u043e\u0432\u0430\u043d \u043a \u043f\u0443\u0431\u043b\u0438\u043a\u0430\u0446\u0438\u0438 </ th > </ tr > </ thead > < tbody > {% for performance in performances %} < tr > < td > {{ performance.author.first_name }} {{ performance.author.last_name }} </ td > < td > {{ performance.title }} </ td > < td > {{ performance.description }} </ td > < td > {% if performance.is_recommended %} \u0414\u0430 {% else %} \u041d\u0435\u0442 {% endif %} </ td > </ tr > {% endfor %} </ tbody > </ table > < h3 class = \"my-5\" > \u041a\u043e\u043c\u043c\u0435\u043d\u0442\u0430\u0440\u0438\u0438 </ h3 > {% for comment in comments %} < div class = \"card mb-3\" > < div class = \"card-body\" > < h4 class = \"card-title\" > {{ comment.author.first_name }} {{ comment.author.last_name }} </ h4 > < h6 class = \"card-subtitle mb-2 text-muted\" > {{ comment.created_on|date:'d/m/Y H:i' }} </ h6 > < p class = \"card-text\" > {{ comment.body }} </ p > < h6 class = \"card-subtitle mb-2 text-muted\" > \u041e\u0446\u0435\u043d\u043a\u0430 {{ comment.rating }}/10 </ h6 > </ div > </ div > {% endfor %} {% if user.is_authenticated %} < h3 class = \"my-3\" > \u041e\u0441\u0442\u0430\u0432\u044c\u0442\u0435 \u043a\u043e\u043c\u043c\u0435\u043d\u0442\u0430\u0440\u0438\u0439 </ h3 > < form method = \"post\" class = \"my-3\" > {% csrf_token %} < input type = \"hidden\" name = \"next\" value = \"{{ next }}\" > {{ form.as_p }} < button type = \"submit\" class = \"btn btn-primary btn-block\" > \u041e\u0441\u0442\u0430\u0432\u0438\u0442\u044c \u043a\u043e\u043c\u043c\u0435\u043d\u0442\u0430\u0440\u0438\u0439 </ button > </ form > < a href = \"{% url 'conference_register' conference.id %}\" > \u041f\u043e\u0434\u0430\u0442\u044c \u0437\u0430\u044f\u0432\u043a\u0443 </ a >< br > < a href = \"{% url 'performances' %}?conference={{ conference.id }}\" > \u041c\u043e\u0438 \u0437\u0430\u044f\u0432\u043a\u0438 \u043d\u0430 \u044d\u0442\u0443 \u043a\u043e\u043d\u0444\u0435\u0440\u0435\u043d\u0446\u0438\u044e </ a > {% endif %} < br > < a href = \"{% url 'conferences' %}\" > \u041a \u0441\u043f\u0438\u0441\u043a\u0443 \u043a\u043e\u043d\u0444\u0435\u0440\u0435\u043d\u0446\u0438\u0439 </ a > {% endblock %} conferences\\templates\\conferences\\list_view.html {% extends 'base.html' %} {% block main %} < h1 > \u041a\u043e\u043d\u0444\u0435\u0440\u0435\u043d\u0446\u0438\u0438 </ h1 > {% if conferences %} < div class = \"list-group\" > {% for conference in conferences %} < a href = \"{% url 'conference_detail' conference.id %}\" class = \"list-group-item list-group-item-action\" > {{ conference.name }} </ a > {% endfor %} </ div > {% else %} < div > \u041d\u0435\u0442 \u043d\u0438 \u043e\u0434\u043d\u043e\u0439 \u043a\u043e\u043d\u0444\u0435\u0440\u0435\u043d\u0446\u0438\u0438 </ div > {% endif %} {% endblock %} conferences\\templates\\conferences\\register_performance.html {% extends 'base.html' %} {% block main %} < div class = \"card\" > < div class = \"card-body\" > < h4 class = \"card-title\" > \u041f\u043e\u0434\u0430\u0442\u044c \u0437\u0430\u044f\u0432\u043a\u0443 </ h4 > < form method = \"post\" > {% csrf_token %} < input type = \"hidden\" name = \"next\" value = \"{{ next }}\" > {{ form.as_p }} < button type = \"submit\" class = \"btn btn-primary btn-block\" > \u041f\u043e\u0434\u0442\u0432\u0435\u0440\u0434\u0438\u0442\u044c </ button > </ form > </ div > </ div > {% endblock %} conferences\\templates\\performances\\edit_performance.html {% extends 'base.html' %} {% block main %} < div class = \"card\" > < div class = \"card-body\" > < h4 class = \"card-title\" > \u041e\u0442\u0440\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c \u0437\u0430\u044f\u0432\u043a\u0443 </ h4 > < form method = \"post\" > {% csrf_token %} < input type = \"hidden\" name = \"next\" value = \"{{ next }}\" > {{ form.as_p }} < button type = \"submit\" class = \"btn btn-primary btn-block\" > \u041f\u043e\u0434\u0442\u0432\u0435\u0440\u0434\u0438\u0442\u044c </ button > < a href = \"{% url 'performance_delete' pk %}\" class = \"btn btn-danger btn-block\" > \u0423\u0434\u0430\u043b\u0438\u0442\u044c </ a > </ form > </ div > </ div > {% endblock %} conferences\\templates\\performances\\list_view.html {% extends 'base.html' %} {% block main %} < div class = \"list-group\" > {% if performances %} {% for performance in performances %} < a href = \"{% url 'performance_edit' performance.id %}\" class = \"list-group-item list-group-item-action\" > {{ performance.title }} ({{ performance.conference.name }}) </ a > {% endfor %} {% else %} < div > \u0412\u044b \u043d\u0435 \u0441\u043e\u0437\u0434\u0430\u043b\u0438 \u043d\u0438 \u043e\u0434\u043d\u043e\u0433\u043e \u0432\u044b\u0441\u0442\u0443\u043f\u043b\u0435\u043d\u0438\u044f </ div > {% endif %} </ div > {% endblock %} conferences\\templates\\registration\\logged_out.html {% extends 'base.html' %} {% block main %} < p > \u0412\u044b \u0432\u044b\u0448\u043b\u0438! </ p > < a href = \"{% url 'login' %}\" > \u0412\u043e\u0439\u0442\u0438 </ a > {% endblock %} conferences\\templates\\registration\\login.html {% extends 'base.html' %} {% block main %} < div class = \"card\" > < div class = \"card-body\" > < h4 class = \"card-title\" > \u0412\u043e\u0439\u0434\u0438\u0442\u0435 \u0432 \u0441\u0432\u043e\u0439 \u0430\u043a\u043a\u0430\u0443\u043d\u0442 </ h4 > < form method = \"post\" > {% csrf_token %} < input type = \"hidden\" name = \"next\" value = \"{{ next }}\" > {{ form.as_p }} < button type = \"submit\" class = \"btn btn-primary btn-block\" > \u0412\u043e\u0439\u0442\u0438 </ button > </ form > < a href = \"{% url 'register' %}\" class = \"card-link\" > \u041d\u0435\u0442 \u0443\u0447\u0435\u0442\u043d\u043e\u0439 \u0437\u0430\u043f\u0438\u0441\u0438? </ a > </ div > </ div > {% endblock %} conferences\\templates\\registration\\register.html {% extends 'base.html' %} {% block main %} < div class = \"card\" > < div class = \"card-body\" > < h4 class = \"card-title\" > \u0420\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u044f </ h4 > < form method = \"post\" > {% csrf_token %} < input type = \"hidden\" name = \"next\" value = \"{{ next }}\" > {{ form.as_p }} < button type = \"submit\" class = \"btn btn-primary btn-block\" > \u041f\u043e\u0434\u0442\u0432\u0435\u0440\u0434\u0438\u0442\u044c </ button > </ form > < a href = \"{% url 'login' %}\" class = \"card-link\" > \u0423\u0436\u0435 \u0435\u0441\u0442\u044c \u0443\u0447\u0435\u0442\u043d\u0430\u044f \u0437\u0430\u043f\u0438\u0441\u044c? </ a > </ div > </ div > {% endblock %}","title":"\u041b\u0430\u0431\u043e\u0440\u0430\u0442\u043e\u0440\u043d\u0430\u044f \u0440\u0430\u0431\u043e\u0442\u0430 2"}]}