<!DOCTYPE html>
<html lang="ru">
    <head>
        <meta charset="UTF-8">
        <title>Task 5</title>
    </head>
    <body>
        <form method="post" action="#" onsubmit="submitForm();return false;">
            <label for="subject">Предмет</label>
            <input type="text" name="subject" id="subject"/>
            <label for="grade">Оценка</label>
            <input type="number" name="grade" id="grade"/>
            <input type="submit">
        </form>
        <div onclick="fetchTable()">Посмотреть таблицу</div>
        <table align="center" width="20%" border="1" id="tableId"></table>
    </body>
    <script>
        function submitForm() {
            let http = new XMLHttpRequest();
            http.open("POST", "http://127.0.0.1:3000/send", true);
            let params = "grade="
                + document.getElementById("grade").value
                + "&subject=" + document.getElementById("subject").value;
            http.send(params);
        }
        async function fetchTable() {
            await fetch('http://localhost:3000/table')
                .then((response) => {
                    response.text()
                }).then((data) => {
                    console.log(data)
                })
        }
    </script>
</html>